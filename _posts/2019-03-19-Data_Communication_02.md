---
title: "데이터 통신 2주차"
date: 2019-03-19 19:20:00 -0800
categories: Data Communication Data_Communication
---

##### 지난 시간 공부한 것
데이터 통신의 정의, 목표, 구성 요소.
프로토콜 정의, 기능.
흐름 제어 상세와 에러 제어.
데이터 교환방식

##### 이번 시간 공부할 것
프로토콜 제어 나머지 - 에러 제어 상세와 동기화, 순서화
프로토콜 구성(OSI, TCP/IP)
OSI 7계층의 상세한 정보

=========================================================

# 프로토콜 제어
### 에러 제어
지난 시간 에러 제어는 정보 전송 시 채널이나 네트워크 요소의 불안전성으로 데이터나 제어 정보가
파손되는 경우에 대비하는 기법이라고 이야기 했다. 
그럼 어떤 식으로 돌아가는 지 알아보자. 일단 프레임의 순서를 검사하며 오류를 찾고,
프로토콜 단위로 재전송하는 방식인데 이 때 일어날 수 있는 오류는 크게 3가지이다.

1. data loss : 보내는 도중 데이터가 손실된 경우
2. ACK loss : ACK 번호가 맞지 않는 경우
3. timeout : 시간초과 기간이 짧아서 요청 처리 전에 서버가 닫아버리는 경우

이를 대비하기 위해 패리티 검사 코드(패리티 비트에 이상이 있나 확인), 순환 잉여도 검사
(CRC, 다항식 코드를 이용하여 오류 검출) 방식을 이용하여 검사한다.

### 동기화 (Syncronization)
두 개체 사이에 정보를 송수신할 때 초기화 상태, 종료 상태 등의 동기를 맞추는 것으로
예로 들어서 송수신 간에 서로 한 비트의 시간 길이가 다르면 전송된 신호를 유효한 신호로
변환할 수 없기 때문에 서로 간의 초기, 종료 등을 맞추고 시작하는 것

### 순서화 (Sequencing)
데이터를 단편화(Fragmentation)하여 전송할 때 데이터들이 올바른 순서로 전송되게 하기 윟
필요한 기능으로, 연결 중심의 데이터 전송에만 사용된다.(ex. TCP protocol)

# 네트워크 프로토콜의 종류
### TCP/IP (Transmission Control Protocol/Internet Protocol)
미국방성이 개발한 프로토콜으로, TCP와 IP를 조합 총 5개층으로 구성된 것으로 현재 인터넷 상에서
제일 많이 쓰이는 방식이다.
5계층은 응용 - 전송 - 네트워크 - 데이터링크 - 물리로 이루어져 있으며, 연결형으로써
단편화는 응용 -> 물리 로 진행될 때 발생하며, 재결합은 물리 -> 응용으로 갈 때 발생한다.
(단편화 예시 100GB의 파일이 있으면 chunk를 10개로 둔다고 하고 10gb로 쪼개서 전송하는 방식)

### TCP의 5계층
응용 계층(최상위) : 사용자/노드 접근 제어, 일반 응용 서비스 수행(ex. 텔넷 같은 SW)
전송 계층 : 전송 프로토콜(TCP, UDP) 선택/결정
네트워크 계층 : 전송 경로 방향 선택/결정
데이터링크 계층 : 실제 데이터 전송 담당
물리 계층 : 전송 매체 선택/결정

이 중 전송, 네트워크, 물리 계층은 전송 효율성(전송률)에 영향을 주며 ,영향 세기로는 
물리 >> 전송 >> 네트워크 순이다.

### 논리적 연결, 물리적 연결
저번 글에 논리적 연결과 물리적 연결을 같게 설명을 했었다. 하지만 사실 이는 굉장히 다른데
이해를 편하게 하기 위해서 그런 식으로 서술했던 것이다. 그럼 실제로 물리적, 그리고 논리적 연결의
차이가 무엇일까?

간단하게 예로 이해를 해보자
만약 TCP/IP를 따르는 컴퓨터가 있다고 하자. 그럼 응용에서 물리로 데이터가 단편화되며, 이동을 한다면
이는 계층 내부 통신(물리적 경로 O)으로 물리적인 연결에 의해 이동을 한다.

하지만 만약 수평적으로 응용(TCP)에서 다른 컴퓨터 응용(TCP)로 이동했다고 가정하자.
이는 계층 외부로 통신(물리적 경로 X) 했기 때문에 논리적 연결에 의해 이동을 했다고 한다.

### OSI (Open Systems Interconnection)
국제 표준화 기구(ISO)에서 세정한 국제적 표준화 망의 구조로, 개방형 시스템간 상호 접속이 가능하게 하고,
표준화된 네트워크 구조를 제공한다. 기능으로 시스템 간 통신을 위한 표준 제공과 통신을 방해하는
기술적인 문제들을 제거하며, 단일 시스템 간의 정보 교환을 하기 위한 상호 접속점을 정의한다.
또 제품들 간의 번거로운 변환없이 통신할 수 있는 능력을 향상시키는 역활을 수행한다.

총 7계층의 기본 참조모델로 구성되어있다. 7계층은 
응용 - 표현 - 세션 - 전송 - 네트워크 - 데이터링크 - 물리로 이루어져 있다.

이 중 눈에 띄는 TCP/IP랑 다른 것은 표현, 세션 계층이 더 있다는 점인데,
표현 계층은 데이터 표현, 형식. 암호화 및 압축 기능을 하며, 세션 계층은 세션 유지 관리
(접속, 종료)한다.

### OSI 참조 모델
동등 계층 프로세스(Peer - to - Peer process, p2p process)
해당 계층에서 통신하는 각 장비의 프로세스를 의미. 객체간 통신이며,
노드끼리 직접 연결하는 방식으로 노드가 서버를 대체한다.

Server(Hub) – client(Node)
중앙에 허브에 여러 개의 노드 연결 구조 (노드간 간접 통신 ,서버 경유한 통신만 가능)

높은 순서
통신 안정성 : Server cliend 
통신 효율성 : peer to peer
통신 보안(안전성) : Server client

### PDU(Protocol Data Unit)
네트워크 구조에서 정보를 실어 나르는 기본 단위 
Message(응용) – Segment(전송) – Packet(네트워크) – Frame(데이터) – Bits(물리)
각 계층마다 별도로 정의

### 데이터 통신 방식

응용(M) – 전송(S) – 네트워크(P) – 데이터링크(F) – 물리(B)

Sender : 응용 -> 물리 : M : 헤더, 트레일러 추가
HT + M : S(Segment), HN + HT + M = P, 
HF + HN + HT + M + TrailerF = F, HF + HN + HT + M + TF = B(물리)
HT : 전송 프로토콜 정보, HN(네트워크 헤더) : 라우팅 정보, HF : 데이터전송정보, TF : 데이터 오류 체크

Receiver : 물리 -> 응용 : 헤더, 트레일러 삭제
B = HF + HN + HT + M + TF, … S = HT + M .. Message

# OSI 7계층
### 물리 계층
데이터링크 계층으로부터 한 단위의 데이터를 받아 통신 링크를 따라 전송될 수 있는 형태로
변환하며, 비트의 흐름을 전자기 또는 광 신호로 변환하여 매체를 통해 신호를 전송하기 위해 사용한다.
이 때 이 비트의 흐름에 따라서 전송매체가 결정된다.

PDU - Bits

### 데이터링크 계층
이웃하고 있는 노드 간의 데이터 전송을 담당하며, 이 때 헤더와 트레일러를 3계층 데이터에 덧붙인다.
(헤더 : 데이터 단위의 시작을 나타내는 표시와 목적지 주소 등을 포함)
(트레일러 : 전송 에러를 검출하기 위한 에러 검출 코드를 포함)

이 계층에서 흐름 제어와, 오류 제어를 한다.

PDU - Frame

### 네트워크 계층
논리적인 링크로 구성되어 있으며 경로 배정을 한다. (Switch and Router)
이 때 Router는 네트워크, 데이터링크, 물리로 이루어져 있으며, 전송 경로를 저장하고,
Switch로 데이터를 전달하며 이 때 switch는 데이터링크, 물리 계층으로 이루어져 있다.

ex) Node A(sender, OSI 7) - router(3) - switch(2) - Node B(receiver, OSI 7)

PDU - Packet

### 전송 계층
네트워크 서비스와 사용자 서비스간의 인터페이스 기능을 하며, 전체 메시지의 종단간 전송을
수행하고, 송수신자간에 전송 프로토콜을 결정한다. 또한 이 단계에서 단편화가 수행된다.

종단간 메시지 전달(end to end)
최종 목적지까지의 데이터 전송을 의미하며, 오류가 발생한 segment의 처리도 담당한다.

분할과 재조합(Fregmentation and Reassembly)
전송 가능한 크기로 나누고, 각 세그먼트에 순서 번호(SN)을 표시한다.

연결 제어
데이터를 안전하게 전송하기 위해 발신자와 목적지 사이의 논리적인 통로인 연결을 만드는 기능을 한다.

PDU - segment

### 세션 계층
특정한 한 쌍의 프로세스들 사이에서 세션이라 불리는 연결을 확립하고 유지하며 동기화한다.
또 사용자간의 데이터 교환을 조직화시키는 수단을 제공한다.
(동기화, 세션 관리 및 종료)

제일 큰 역활은 동기화로 데이터 단위를 전송 계층으로 전송하기 위한 순서를 결정하거나
데이터에 대한 중간 점검 및 복구를 위한 동기점을 제공한다. 또 대화 제어나 원활한 종료,
세션 관리 등의 역활을 수행한다.

### 표현 계층
송/수신자가 공통으로 이해할 수 있도록 데이터 표현 방식을 바꾸는 기능을 한다.
데이터를 압축하거나 암호화를 하는 등의 기능 또한 수행한다.
(인코딩, 암호화, 압축)

역할로는 데이터 보안을 위해 암호화와 해독을 담당하며. 전송을 보다 효율적으로 하기 위해,
데이터를 압축하거나 해제하는 기능을 수행하며, 그 외로는 형식 변환, 보안 등을 담당한다.

### 응용 계층
응용 프로세스가 네트워크 환경에 접근하는 수단을 제공하며, 응용 프로세스들이 
상호간에 유용한 정보 교환 가능하다.

응용 : M
표현 : M
세션 : M
전송 : Header + M

역활로는 네트워크 가상 터미널을 통해 물리적인 터미널의 SW 버전을 지원하며, 파일 접근, 전송, 관리를
수행하고 우편 서비스, 디렉토리 서비스 등을 수행한다.

PDU - Message
